# LUT Convertor  ♥️ Codespace Jupyter Notebooks

_____________________________
< LUT FILE CONVERTOR        >
-----------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
_____________________________
_____________________________

LUT Convertor is a Python tool for extracting and applying Look-Up Tables (LUTs) for color grading, contrast, and brightness adjustments on images. This tool leverages the power of numpy and PIL to process images and transform their appearance based on reference images.

## Features

- Extract color grading LUT from a reference image.
- Extract contrast and brightness LUTs.
- Apply LUTs to input images.
- Save transformed images.

## Installation

1. Clone this repository:
    ```sh
    cd lut-convertor
    ```

2. Install the required dependencies:
    ```sh
    pip install -r requirements.txt
    ```

## Usage

1. Place your reference image and input image in the `data/images` directory.

2. Run the script:
    ```sh
    python lut_convertor.py
    ```

3. The transformed images will be saved in the `data/output` directory.

## Example creating .cube LUT packs from .npy

```python
import numpy as np

def save_lut_as_cube(lut, file_path):
    """
    Save a 3D LUT as a .cube file.
    :param lut: 3D numpy array representing the LUT.
    :param file_path: Path to save the .cube file.
    """
    lut_size = lut.shape[0]
    with open(file_path, 'w') as f:
        f.write("TITLE \"Generated by LUT Convertor\"\n")
        f.write(f"LUT_3D_SIZE {lut_size}\n")
        f.write("DOMAIN_MIN 0.0 0.0 0.0\n")
        f.write("DOMAIN_MAX 1.0 1.0 1.0\n")
        
        for r in range(lut_size):
            for g in range(lut_size):
                for b in range(lut_size):
                    f.write(f"{lut[r, g, b, 0]} {lut[r, g, b, 1]} {lut[r, g, b, 2]}\n")

# Example usage
if __name__ == "__main__":
    # Load the LUT from a .npy file
    lut = np.load('data/output/color_grading_lut.npy')
    
    # Save the LUT as a .cube file
    save_lut_as_cube(lut, 'data/output/color_grading_lut.cube')
```


## Example script inside the notebook

```

from PIL import Image
import numpy as np
from tqdm import tqdm

def load_image(image_path):
    return Image.open(image_path)

def extract_color_grading(image):
    # Function implementation
    pass

def extract_contrast(image):
    # Function implementation
    pass

def extract_brightness(image):
    # Function implementation
    pass

def apply_lut(image, lut):
    # Function implementation
    pass

if __name__ == "__main__":
    import time

    start_time = time.time()

    reference_image_path = 'data/images/reference_image.jpg'
    input_image_path = 'data/images/input_image.jpg'
    
    reference_image = load_image(reference_image_path)
    color_grading_lut = extract_color_grading(reference_image)
    contrast_lut = extract_contrast(reference_image)
    brightness_lut = extract_brightness(reference_image)

    input_image = load_image(input_image_path)
    color_grading_image = apply_lut(input_image, color_grading_lut)
    contrast_image = apply_lut(input_image, contrast_lut)
    brightness_image = apply_lut(input_image, brightness_lut)

    color_grading_image.save('data/output/color_grading_output.jpg')
    contrast_image.save('data/output/contrast_output.jpg')
    brightness_image.save('data/output/brightness_output.jpg')

    end_time = time.time()
    print(f"Transformed images saved. Execution time: {end_time - start_time} seconds")
```